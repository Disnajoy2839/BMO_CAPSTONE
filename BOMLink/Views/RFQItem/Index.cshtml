@model BOMLink.ViewModels.RFQItemViewModel.RFQItemListViewModel

@{
	ViewData["Title"] = "RFQ Items";
}

<div class="container-fluid mt-4">
	<div class="row">
		<!-- Sidebar Section -->
		<aside class="col-md-3">
			<div class="card shadow-sm p-3">
				<h5 class="fw-bold">Actions</h5>
				<!-- Export RFQ Items -->
				<a href="@Url.Action("ExportToCSV", "RFQItem", new { rfqId = Model.RFQId })" class="btn btn-outline-warning w-100 mb-2">Export to CSV</a>
				<a href="@Url.Action("ExportToExcel", "RFQItem", new { rfqId = Model.RFQId })" class="btn btn-outline-success w-100 mb-2">Export to Excel</a>

				<!-- Back to RFQ's page -->
				<a href="@Url.Action("Index", "RFQ", new { id = Model.RFQId })" class="btn btn-outline-secondary w-100  mb-3">Back to RFQ</a>
			</div>
		</aside>

		<!-- Main Content Section -->
		<main class="col-md-9">
			<h2>RFQ Items - @Model.RFQNumber</h2>
			<h5 class="text-muted">Supplier: @Model.SupplierName</h5>
            <form id="bulkEditForm" method="post" asp-controller="RFQItem" asp-action="BulkUpdate">
                <input type="hidden" name="rfqId" value="@Model.RFQId" />

                <table class="table mt-3">
                    <thead class="table-light">
                        <tr>
@*                             <th>Delete</th> *@
                            <th>Part Number</th>
                            <th>Description</th>
                            <th>Qty</th>
                            <th>UOM</th>
                            <th>Price</th>
                            <th>ETA</th>
                        </tr>
                    </thead>
                    <tbody>
                        @for (var i = 0; i < Model.Items.Count; i++)
                        {
                            <tr>
@*                                 <td>
                                    <input type="checkbox" name="deleteIds" value="@Model.Items[i].Id" />
                                </td> *@

                                <td>@Model.Items[i].PartNumber</td>
                                <td>@Model.Items[i].Description</td>

                                <!-- Hidden field to track RFQ Item ID -->
                                <input type="hidden" name="rfqItems[@i].Id" value="@Model.Items[i].Id" />

@*                                 <td>
                                    <input type="number" name="rfqItems[@i].Quantity" value="@Model.Items[i].Quantity" class="form-control" min="1" required />
                                </td> *@
                                <td>@Model.Items[i].Quantity</td>
                                <td>
                                    <input type="text" name="rfqItems[@i].UOM" value="@Model.Items[i].UOM" class="form-control" />
                                </td>
                                <td>
                                    <input type="number" name="rfqItems[@i].Price" value="@Model.Items[i].Price" step="0.01" class="form-control" />
                                </td>
                                <td>
                                    <input type="text" name="rfqItems[@i].ETA" value="@Model.Items[i].ETA" class="form-control" placeholder="e.g., 10 days, 4 weeks" />
                                </td>
                            </tr>
                        }
                    </tbody>
                </table>

                <button type="submit" class="btn btn-outline-primary mt-3">Save Changes</button>
				<a href="@Url.Action("Index", "RFQ", new { id = Model.RFQId })" class="btn btn-outline-secondary mt-3">Cancel</a>
            </form>
		</main>
	</div>
</div>
